<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Spirit of the forest</title>
  </head>
  <body>
    <image src="" width="480" height="270"></image>
    <img id="img">
    <p id="output"></p>
    <input id= "input" type="text" placeholder="Enter your action here...">
    <button>Enter</button>

    <script>

      //Create the map
      var map = [];
      map[0] = "Deep Wood";
      map[1] = "Treefolk's Crossing";
      map[2] = "Crone's Hut";
      map[3] = "Hermits Thicket";
      map[4] = "Ancient Grove";
      map[5] = "Spore Garden";
      map[6] = "Forest's Edge";
      map[7] = "Verdant Timberline";
      map[8] = "Overgrown Woodland";

      //Create the images
      var image = [];
      map[0] = "Deep Wood";
      map[1] = "Treefolk's Crossing";
      map[2] = "Crone's Hut";
      map[3] = "Hermits Thicket";
      map[4] = "Ancient Grove";
      map[5] = "Spore Garden";
      map[6] = "Forest's Edge";
      map[7] = "Verdant Timberline";
      map[8] = "Overgrown Woodland";


      // set players start locations
      var mapLocation = 7;

      //initialize the players input
      var playersInput = "";

      //initialize the gameMessage
      var gameMessage = "";

      //Create and array of actions that the game understands
      //and a variable to store the current action
      var actionIKnow = ["north", "east", "south", "west"];
      var action = "";

      //The input and output fields
      var output = document.querySelector("#output");
      var input = document.querySelector("#input");

      //The images
      var image = document.querySelector("img");

      //The button
      var button = document.querySelector("button");
      button.style.cursor = "pointer";
      button.addEventListener("click", clickHandler, false);

      //Display the players location
      render();

      function clickHandler()
      {
          playGame();
      }

      function playGame()
      {
        //Get the player's input and convert it into lowercase
        playersInput =  input.value;
        playersInput = playersInput.toLowerCase();

        //Reset these variables from the previous turn
        gameMessage = "";
        action = "";

        //Figure out the players action
        for(var i = 0; i < actionIKnow.length; i ++)
          {if(playersInput.indexOf(actionIKnow[i]) !== -1)
            {
              action = actionIKnow[i];
              console.log("player's action: " + action);
              break;
            }
          }

        //Choose the correct action
        switch(action)
        {
          case "north":
            mapLocation -= 3;
            break;

          case "east":
            mapLocation += 1;
            break;

          case "south":
            mapLocation +=3;
            break;

          case "west":
            mapLocation -=1;
            break;

          default:
          gameMessage = "Sorry, I dont understand that.";
        }

        //Render the game
        render();
      }

      function render ()
    {
      //Render the location
      output.innerHTML = map[mapLocation];

      //Change the image source
      image.src = "img/" + img[mapLocation];

      //Display the gameMessage
      output.innerHTML += "<br><em>" + gameMessage + "</em>";

    }

    </script>
  </body>
</html>
